# Пользовательские сценарии (User Flow) — MVP образовательной платформы

Дата: 24.01.2026

Цель: описать пошаговые пользовательские пути от входа на сайт до ключевых действий: регистрация/вход, просмотр курсов, запись на курс, доступ к личному кабинету (ЛК), переход на страницу CTF. Покрыты роли: новый пользователь, студент, администратор.

---

**Структура документа**
- Краткое описание ролей
- Сценарии (список шагов / текстовая блок-схема) для каждой роли
- Альтернативные ветви и ошибки

---

**Роли**
- Новый пользователь — посетитель без аккаунта.
- Студент — зарегистрированный пользователь, имеющий доступ к одному или нескольким курсам.
- Администратор — управляет курсами, пользователями, CTF-мероприятиями.

---

**Обозначения**
- [A] — действие
- (U) — пользовательский ввод/выбор
- → — переход
- [S] — система (ответ, валидация)

---

## 1. Новый пользователь — основной путь (регистрация, просмотр курсов, запись)

1. [A] Заходит на главную страницу сайта → [S] показывается список популярных курсов и кнопки "Войти" / "Регистрация".
2. [A] (U) Нажимает "Регистрация" → Переход на форму регистрации.
3. [A] (U) Заполняет форму: email, имя, пароль, подтверждение пароля, согласие с правилами → [S] валидация полей.
   - Ветвь: если ошибка валидации → [S] показать сообщения об ошибке → вернуться к шагу 3.
4. [S] Создаёт аккаунт, отправляет подтверждение по email (опционально) → [A] (U) Подтверждает email или продолжает без подтверждения (в зависимости от политики).
5. [S] Перенаправляет в ЛК или на страницу приветствия с предложением пройти курс/посмотреть каталог.
6. [A] (U) Переходит в каталог курсов → [S] Список курсов с фильтрами и поиском.
7. [A] (U) Открывает карточку курса → [S] Показывает детали курса: описание, программы, стоимость, расписание, преподаватели, отзывы.
8. [A] (U) Нажимает "Записаться/Купить" → [S] Если платный — предложение оплаты; если бесплатный — мгновенная запись.
   - Ветвь: если пользователь не авторизован (редкий случай при автономной записи) → показать форму входа/регистрации и затем вернуться.
9. [S] После успешной записи — курс отображается в ЛК в разделе "Мои курсы" и/или отправляется уведомление на почту.
10. [A] (U) Переходит в ЛК — видит прогресс, материалы, ссылку на CTF (если применимо).

---

## 2. Студент — основной путь (вход, обучение, участие в CTF)

1. [A] Заходит на сайт → [A] (U) Нажимает "Войти" → Переход на форму входа.
2. [A] (U) Вводит email и пароль → [S] Валидация и аутентификация.
   - Ветвь: неверные данные → показать ошибку, предложить восстановление пароля.
3. [S] Успешный вход → перенаправление в `Личный кабинет` (`/dashboard`).
4. [A] (U) В ЛК видит: список записанных курсов, текущий прогресс, уведомления, кнопки "Продолжить курс" и "Мои сертификаты".
5. [A] (U) Нажимает "Продолжить курс" → [S] Переход в страницу урока/модуля → учебный контент (видео, материал, тесты).
6. [A] (U) Выполняет модуль/проверочный тест → [S] Оценивает, сохраняет прогресс.
7. [A] (U) В ЛК может перейти на страницу CTF (если открыта) или на раздел с заданиями → [S] Переход на `/ctf`.
8. [A] (U) На странице CTF: видит список задач, правила, кнопку "Участвовать" → при нажатии — участвует в текущем событии.
   - Ветвь: если событие платное/ограничено по приглашениям → проверка прав доступа/оплаты.
9. [S] Результаты CTF сохраняются в профиле, возможно — отображается рейтинг.

---

## 3. Администратор — основной путь (управление курсами, пользователями, CTF)

1. [A] (U) Администратор входит через специфический доступ или через тот же механизм входа, но с правами `admin`.
2. [S] При успешном входе — перенаправление в админ-панель (`/admin`).
3. [A] (U) В админ-панели: список курсов, кнопки "Создать курс", "Редактировать", "Удалить"; управление пользователями; управление CTF.
4. [A] (U) Создать курс: заполнить метаданные, загрузить материалы, задать цену и расписание → [S] валидация и сохранение.
5. [A] (U) Управление записями студентов: смотреть список записавшихся, вручную добавлять/удалять студента из курса, выдавать сертификаты.
6. [A] (U) Управление CTF: создать/настатвить задание, установить даты, ограничения, просмотреть результаты и таблицу лидеров.
7. [S] Все изменения отражаются в соответствующих разделах для студентов и логируются.

---

## 4. Текстовые блок-схемы (схематичное представление)

Новый пользователь:
Главная → Регистрация → Валидация → Подтверждение(email) → Каталог → Карточка курса → Запись → ЛК → Материалы

Студент:
Вход → ЛК → Продолжить курс → Урок/Тест → Сохранение прогресса → (опционально) CTF → Результат/Рейтинг

Админ:
Вход(admin) → Админ-панель → Управление курсами / пользователями / CTF → Сохранение/лог → Изменения применены

---

## 5. Альтернативные ветви и ошибки (критические точки)
- Ошибка регистрации: дублирующий email, слабый пароль → показать понятное сообщение и подсказки.
- Ошибка входа: неверный пароль → предложение восстановления пароля (email/смс).
- Оплата не прошла: откат записи, уведомление, предложение повторить оплату.
- Доступ к платному контенту без оплаты: блокировка с предложением оформить подписку/оплатить.
- CTF: попытка участвовать вне окна события → показать сообщение о датах и статусе мероприятия.

---

## 6. Рекомендации по улучшению UX (кратко)
- Сохранять контекст: если регистрация прервала процесс записи, возвращать пользователя к цели.
- Чёткие уведомления и статусы записей (оплачено, ожидает подтверждения, отказ).
- Быстрый доступ к CTF из ЛК и карточки курса (если привязано).
- Логи и уведомления для админа при критических ошибках (платежи, массовые записи).

---

## 7. Замечания по реализации и сценарии тестирования
- Для каждого сценария подготовить чек-листы UI и API: вход/регистрация, валидация, запись, оплата, переходы в ЛК, CTF.
- Тестовые пользователи: новый, зарегистрированный студент, администратор.

---

Файл создан автоматически как первичная документированная версия User Flow для MVP. Можно дополнить визуальными диаграммами (например, в Figma или PlantUML) и связать с таск-трекером.

---

## 8. Acceptance criteria (критерии приёмки)

- Регистрация:
   - Форма принимает email, имя и пароль; при неверных данных показываются понятные ошибки.
   - Зарегистрированный пользователь появляется в базе и получает уведомление (email) при включённой вёрстке подтверждения.
   - После регистрации пользователь перенаправляется в `Личный кабинет` и видит приветствие.
- Вход:
   - Пользователь успешно аутентифицируется по email+паролю и попадает в `Личный кабинет`.
   - При неверных учётных данных показывается сообщение с подсказкой восстановления пароля.
- Просмотр каталога и карточки курса:
   - Каталог возвращает список курсов с фильтрами и поиском.
   - Карточка курса содержит описание, программу, цену, расписание и кнопку "Записаться".
- Запись на курс:
   - Для бесплатных курсов запись происходит мгновенно, курс появляется в `Мои курсы`.
   - Для платных курсов запускается процесс оплаты; после успешной оплаты запись подтверждается и отображается в `Мои курсы`.
- Личный кабинет:
   - Отображается список записанных курсов, прогресс и доступ к материалам.
   - Сохранение прогресса работает корректно при прохождении уроков/тестов.
- CTF:
   - Страница `/ctf` доступна для авторизованных пользователей, открывает список задач и предоставляет кнопки участия.
   - Ограничения по времени/плате/приглашениям корректно блокируют/разрешают участие.

## 9. QA чек‑лист (короткий)

- Проверка регистрации: позитивный и негативный сценарии.
- Проверка входа: верные/неверные данные, восстановление пароля.
- Просмотр каталога: поиск, фильтры, пагинация.
- Карточка курса: контент и кнопка записи.
- Запись на курс: бесплатная и платная ветви, уведомления, отображение в ЛК.
- ЛК: отображение прогресса, переход к урокам, сохранение прогресса.
- CTF: доступность страницы, участие, сохранение результатов и рейтинг.

## 10. Визуальные диаграммы

Диаграммы представлены в репозитории: [docs/diagrams/user-flows.mmd](docs/diagrams/user-flows.mmd)

## 11. Что сделано мной для 100% завершения

- Добавлены критерии приёмки (Acceptance criteria).
- Сформирован короткий QA чек‑лист.
- Добавлены текстовые диаграммы в формате Mermaid: [docs/diagrams/user-flows.mmd](docs/diagrams/user-flows.mmd).

Если хотите, я могу экспортировать диаграммы в изображение (при наличии инструмента) или подготовить PlantUML‑версию.
